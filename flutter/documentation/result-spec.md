# Result format

This file explains the full format for results generated by this app.

This format is used when saving results locally on device, when uploading them to the online database,
and when fetching them from the online database.

## General structure

Results are serialized as JSON.

Results must be a map with the following items in the root level:

* `uuid`: string  
UUID is generated by the app when all benchmarks are finished.
* `results`: list of maps. See [List of benchmark-specific results](#benchmark-specific-results) section
* `environment_info`: map. See [Environment info](#environment-info) section
* `build_info`: map. See [Build info](#application-build-info) section

## Benchmark-specific results

Each run of a single benchmark generates one map with results.

For example, if you select 3 benchmarks, you will get a list with 3 items, each describing specific benchmark run.

If you additionally enable Submission mode, you will get a list of 6 items,
because each benchmark will generate a performance and an accuracy mode result.

* `benchmark_id`: string
* `benchmark_name`: string  
  Value from `task.model.name` for this benchmark from selected tasks.pbtxt file.
* `loadgen_mode`: string enum  
  See [`::mlperf::TestSettings`](https://github.com/mlcommons/inference/blob/08f5e36b74f4ec78ad738a287ae50462bb130330/loadgen/test_settings.h#L84).  
  Allowed values:
  * `accuracy_only`
  * `performance_only`
* `loadgen_scenario`: string enum  
  See [`::mlperf::TestScenario`](https://github.com/mlcommons/inference/blob/a67f9f34bcc4439af4740095958c23380f9b284b/loadgen/test_settings.h#L38).  
  Allowed values:
  * `single_stream`
  * `offline`
* `dataset`: map  
  Dataset info for this benchmark from selected tasks.pbtxt file.
  * `name`: string
  * `type`: string enum  
    Allowed values:
    * `IMAGENET`
    * `COCO`
    * `ADE20K`
    * `SQUAD`
  * `data_path`: string
  * `groundtruth_path`: string
* `backend_settings`: map  
  Settings defined by selected backend for this benchmark.
  * `accelerator_code`: string
  * `accelerator_desc`: string
  * `configuration`: string
  * `model_path`: string
* `backend_extra_settings`: list of maps  
  Extra settings that can vary between different benchmarks and backends.  
  Here must be stored values set by backend in `common_setting`.  
  `batch_size` value for offline benchmarks should be located here.  
  `shards_num` value for TFLite backend should be located here.  
  Map structure:
  * `id`: string. Value from `setting.id` that is passed to backend
  * `name`: string. Value from `setting.name` that is passed to backend
  * `value`: string. Value from `setting.value.value` that is passed to backend
  * `value_name`: string. Value from `setting.value.name` that is passed to backend
* `throughput`: floating point number. Present for all results
* `accuracy`: floating point number. Present for all results, including `loadgen_mode=PerformanceOnly` runs  
  When actual accuracy is not available value `-1` must be used
* `min_duration_ms`: floating point number  
  Value from `task.min_duration_ms` for this benchmark from selected tasks.pbtxt file.
* `measured_duration_ms`: floating point number  
  Actual duration of the benchmark in milliseconds for start to finish.
* `min_samples`: integer number  
  Value from `task.min_query_count` for this benchmark from selected tasks.pbtxt file.
* `measured_samples`: integer number  
  Actual number of samples evaluated during the benchmark
* `datetime`: string  
  Contains datetime of the moment when benchmark **started**  
  Format is: `yyyy-MM-ddTHH:mm:ss.sTZD`
* `backend_accelerator_name`: string  
  Backend-defined string describing actual accelerator used during this benchmark.  
  Should typically match `accelerator_desc` from the `backend_settings` map but may be different in case of accelerator fallback.

## Environment info

Info about environment the app is running in. May change when you update your OS, change device hardware, or use another device.

* `os`: string enum  
  Allowed values:
  * `android`
  * `ios`
  * `windows`
* `os_version`: string  
  Must be obtained from environment
* `manufacturer`: string. Manufacturer of the device  
  On Windows systems value must be `Unknown`.  
  On iOS systems value must be `Apple`.  
  On Android systems value must represent actual manufacturer name obtained from system environment.
* `model`: string. Manufacturer-defined model name  
  On Windows systems value must be `Unknown PC`.  
  On iOS systems value must be human-readable iPhone name. For example: `iPhone SE 2nd Gen`.  
  On Android systems value must represent actual model name obtained from system environment.
* `selected_backend`: map
  * `filename`: string  
    Actual filename of the backend
  * `vendor_name`: string  
    Vendor name reported by backend
  * `name`: string  
    Backend name reported by backend

## Application build info

Constant info for this build of the app. The only way to change it is to use a different version of the app.

* `version`: string
* `build_number`: string
* `official_release_flag`: bool  
  Indicates if the official release flag was set for this build
* `dev_test_flag`: bool  
  Indicated if development test flag was set for this build
* `backend_list`: list of strings  
  Must contain actual list of backends that are included into this version of the app.
* `git_branch`: string
* `git_commit`: string
* `git_dirty_flag`: bool  
  Indicates if there are any local changes compared to the commit specified in `git_commit`.
